{% extends 'main.html'  %}
{% load static %}
{% block content %}

<div id="container" class="container">
    <div class="row justify-content-center">
<h1 class="col-12 text-center pb-1"> {{article.title}}</h1>
<!--<img class=" figure col-6 img-thumbnail mb-5" src="{{article.image.url}}" alt="image de l'article {{article.slug}}">
 cette ligne vaut dans le cas où l'on a uploadé une image dans la database mais heroku supprime les images uploadés
  par les utilisateurs (à moins de payer un addon) en attendant mieux je fais pointer la source vers une image statique
  qui va avec l'application-->
<img id="id_img" class=" figure w-50 h-50 rounded my-5 img-fluid" src="{% static '' %}{{article.image}}" alt="image:{{article.image}}">


<div class="col-12 justify-content-start"><p id="id_texte" class="border-start border-4 fs-40 p-2"> {{article.text}}</p> </div>
{% if user.is_superuser %}
<div class="text-center">
<a class="btn btn-outline-warning my-2" href="{% url 'edit-post' article.slug %}">Editer cet article</a>

        <a class="btn btn-outline-danger col-auto my-2" href="{% url 'del-post' article.slug %}">Supprimer cet article</a>
    </div>
{% endif %}
    </div>
 </div>

 {% if all_article_comments %}
    <div id="card_container" class="">
        <div class="card-body">
            <h5 class="card-title text-center w-50 justify-content-center"> Commentaires des lecteurs</h5>
                {% for comment in all_article_comments  %}
                    <div class="justify-content-sm-start">
                        <div class="card-text col-sm-6 ">
                               Posté par:  <span class="fw-bold">{{comment.user}}</span>
                          le: <span class="fw-bold"> {{comment.date}}</span>
                        <h5 class="col-sm-auto text-justify p-2">
                         {{comment.text}}</h5>
                        </div>
                    </div>

                {% endfor %}
            </div>
        </div>
                {% endif %}

<section>

    <div class="container text-center">
        <form method="POST">
            {% csrf_token %}

            <div class="col-auto btn btn-myhover-box mt-3 mb-2">
                <label class="lead" for="commentaire">Ajouter un commentaire:</label>
            </div>

            <div class="input-group row justify-content-center" >
                <div class="container col-4 mb-2"><div class="input-group-prepend ">
                    <span class="input-group-text fw-bold">{{user.username}}</span>
                </div>
                <div><textarea class="form-control "
                               aria-label="With textarea"
                               id="commentaire"
                               name="commentaire"
                               placeholder="votre commentaire ici..."
                               rows="5"
                               cols="30"

                      ></textarea>
                </div>
                <input id="btn_publish" class="btn btn-myhover-box col-sm-auto my-2" type="submit" value="publier le commentaire">
            </div>
            
        </div></form>
    </div>
</section>
{% block commentaire %}
{% endblock %}

<div class="container mt-4">
    <div class="row justify-content-center"></div>
<nav aria-label="Page navigation example">
  <ul class="pagination pagination-lg justify-content-center">
    <li class="page-item"><a class="page-link" href="{% url 'articles-index' %}">Previous</a></li>
    <li class="page-item"><a class="page-link" href="#">1</a></li>
    <li class="page-item"><a class="page-link" href="#">2</a></li>
    <li class="page-item"><a class="page-link" href="#">3</a></li>
    <li class="page-item"><a class="page-link" href="#">Next</a></li>
  </ul>
</nav>
</div>
<script type = "module" src="{%static '/myJS/detail_article.js' %}"></script>
{% endblock %}
